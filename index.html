<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IBERPIEDRA - CATÁLOGO</title>
  <link rel="icon" href="./img/icon.png" />

  <!-- fuentes externas -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet" />

  <!-- hoja de estilos -->
  <link rel="stylesheet" href="./css/styles.css" />

  <!-- scripts -->
  <script src="./scripts/buttonsandforms.js"></script>
  <script src="./scripts/search.js"></script>
  <script src="./scripts/prueba.js"></script>
  <script src="./scripts/cambioprecio.js"></script>
  <script src="./scripts/addproduct.js"></script>
  <script src="./scripts/eliminarProdu.js"></script>
</head>

<body>
  <!-- estructura principal -->
  <div class="containercolumnas">
    <input type="checkbox" id="toggle" hidden />
    <div class="columna1">
      <!-- icono hamburguesa -->
      <label for="toggle" class="hamburger">
        <span></span>
        <span></span>
        <span></span>
        <span class="x-extra"></span>
      </label>
      <div class="botones">
        <button class="buttonMod" onclick="toggleFormulario('modificar')">MODIFICAR PRECIO</button>
        <button class="buttonAdd" onclick="toggleFormulario('engadir')">AÑADIR PRODUCTO</button>
        <button class="buttonDel" onclick="toggleFormulario('eliminar')">ELIMINAR PRODUCTO</button>
      </div>
    </div>
    <!-- logo fijo -->
    <div class="columna2">
      <div class="logo-sticky">
        <img class="logo" src="./img/logo.png" alt="" />
      </div>

      <div class="principal" id="principal">
        <div class="searchbar">
          <input class="miinput" type="text" placeholder="BUSCAR" id="inputReferencia" inputmode="search" />
          <button class="cambiar" onclick="buscar()">BUSCAR</button>
          <button class="cambiar" onclick="resetBusqueda()">RESET</button>
        </div>
        <div id="mostrarProducto" class="mostrarProducto"></div>
      </div>
      <!-- formulaario modificar precio -->
      <div class="modificar">
        <input class="miprod" id="inputIdProducto" type="text" placeholder="Código de producto..." />
        <input class="mipre" id="inputNuevoPrecio" type="text" placeholder="Nuevo Precio sin IVA..." />
        <button class="cambiar" id="btnCambiarPrecio">APLICAR CAMBIO</button>
      </div>
      <!-- formulario añadir producto -->
      <div class="engadir">
        <form onsubmit="return false;">
          <label for="pname">NOMBRE PRODUCTO</label>
          <input class="inputadd" id="pname" type="text" placeholder="Producto..." /><br /><br>
          <label for="pcod">CÓDIGO</label>
          <input class="inputadd" id="pcod" type="text" placeholder="Código..." /><br /><br>
          <label for="pfam">FAMILIA</label>
          <input class="inputadd" id="pfam" type="text" placeholder="Familia..." /><br /><br>
          <label for="pprecio">PRECIO (SIN IVA)</label>
          <input class="inputadd" id="pprecio" type="text" />
          <!-- llamada a la función que hace el POST-->
          <button class="cambiar" onclick="agregarProducto()">AÑADIR PRODUCTO</button>
        </form>
      </div>
      <!-- formulario eliminar producto -->
      <div class="eliminar" id="eliminar">
        <input class="inputadd" type="text" id="miproducto" placeholder="Código de producto..." />
        <!-- llamada a la función que hace el DELETE-->
        <button class="cambiar" id="btnDelete" onclick="eliminarProducto()">ELIMINAR PRODUCTO</button>
      </div>
    </div>
  </div>

  <footer class="mifooter" id="mifooter">
    <div class="columna1footer"></div>
    <div class="columna2footer">
      <!-- botón para volver arriba -->
      <img src="./img/angles-up-solid.png" alt="" style="height: 45px;" class="footer-image" onclick="scrollToTop()" />
    </div>
  </footer>

  <script>
    const textInput = document.getElementById('inputReferencia');
    textInput.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') buscar();
    });

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
  <!-- al verrar el menú lateral se vuelve a la vista principal-->
  <script>
  const toggleCheckbox = document.getElementById('toggle');

  toggleCheckbox.addEventListener('change', () => {
    if (!toggleCheckbox.checked) {
      // Si el menú se cierra, mostrar búsqueda
      mostrarFormularioBusqueda();
    }
  });
</script>

</body>

</html>
